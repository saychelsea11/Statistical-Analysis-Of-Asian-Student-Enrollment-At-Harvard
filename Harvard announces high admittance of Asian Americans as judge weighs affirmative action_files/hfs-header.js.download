"use strict";var _this=void 0;function _typeof(a){"@babel/helpers - typeof";return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},_typeof(a)}function _defineProperty(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}function _possibleConstructorReturn(a,b){return b&&("object"===_typeof(b)||"function"==typeof b)?b:_assertThisInitialized(a)}function _assertThisInitialized(a){if(void 0===a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function _get(a,b,c){return _get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(a,b,c){var d=_superPropBase(a,b);if(d){var e=Object.getOwnPropertyDescriptor(d,b);return e.get?e.get.call(c):e.value}},_get(a,b,c||a)}function _superPropBase(a,b){for(;!Object.prototype.hasOwnProperty.call(a,b)&&(a=_getPrototypeOf(a),null!==a););return a}function _getPrototypeOf(a){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(a){return a.__proto__||Object.getPrototypeOf(a)},_getPrototypeOf(a)}function _inherits(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function");a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,writable:!0,configurable:!0}}),b&&_setPrototypeOf(a,b)}function _setPrototypeOf(a,b){return _setPrototypeOf=Object.setPrototypeOf||function(a,b){return a.__proto__=b,a},_setPrototypeOf(a,b)}function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function _defineProperties(a,b){for(var c,d=0;d<b.length;d++)c=b[d],c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(a,c.key,c)}function _createClass(a,b,c){return b&&_defineProperties(a.prototype,b),c&&_defineProperties(a,c),a}(function(){function a(){var a=s.getNav(),b=m(a),c=function(c){var d=c.position,f=c.force,h=void 0!==f&&f,i=b.has("stuck"),j=g(s.selector).getBoundingClientRect(),k=j.top;if(u){var l=d>k+e.pageYOffset-u;(h||!i)&&l?(b.add("stuck"),a.style.top="".concat(u,"px")):(h||i)&&!l&&(b.rem("stuck"),a.style.top="")}else b.toggle("stuck",d>k+e.pageYOffset),a.style.top=""},d=new MutationObserver(function(){v(),c({position:e.pageYOffset,force:!0}),e.dispatchEvent(j)}),f=g(s.selector);for(t=f.previousSibling;null!==t;){if(-1<["DIV"].indexOf(t.nodeName)){var h=e.getComputedStyle(t),i=h.position;"fixed"===i&&d.observe(t,{attributes:!0,attributeFilter:["class"],characterData:!1})}var k=t;t=k.previousSibling}v(),q.add(c),c({position:e.pageYOffset,force:!0})}function b(){var a=s.getNav(),b=m(a);b.has("share-open")?(b.add("share-close"),b.rem("share-open"),setTimeout(function(){b.rem("share-close")},500)):(b.rem("share-close"),b.add("share-open")),758>e.innerWidth?r.toggle(".js-share-selector"):r.enable(),k("track",l.shrClick,{isOpen:m(a).has("share-open")})}function c(){var a=s.getNav(),b=m(a),c=g("".concat(s.selector," .menu"));c&&(b.has("menu-open")?(b.rem("menu-open"),r.enable(),c.removeAttribute("style")):(r.disable(".js-menu-selector"),b.add("menu-open"),c.scrollTop=0,e.dispatchEvent(j),b.rem("share-open")),k("track",l.hmbClick,{isOpen:b.has("menu-open")}))}function d(){var d=HFSconfig.header||{},e=d.globalNav,i=d.globalNavInsert,j=d.shortcuts,o=d.activeAt,p=d.primary,t=d.social,u=d.theme,v=d.url,w=g(s.selector),x=w.querySelector.bind(w),y=x("nav.hfsh"),z=x(".global"),A=m(y);A.add("init"),!(void 0!==e)||e?(void 0!==i&&i&&(A.add("show-global"),A.add("has-global-insert")),q.add(function(a){var b=a.position,c=a.down;600<b&&A.toggle("stash-global",c)})):(A.add("hide-global"),A.rem("show-global")),(!(void 0!==j)||j)&&A.add("show-shortcuts"),u&&-1!==h.indexOf(u)&&A.add(u),q.add(function(a){var b=a.position;A.toggle("scrolled",0<b)}),o&&q.add(function(a){var b=a.position;A.toggle("active",b>=o),b<o&&A.rem("share-open")}),a(),s.updateHeadline(p),s.updateSocial(v,t);var B=x("button.hamburger");B&&n(".js-menu-toggle",function(a){a.addEventListener("click",c)}),z&&(x(".js-search-open").addEventListener("click",function(){A.add("search-open"),r.disable()}),x(".js-search-close").addEventListener("click",function(){A.rem("search-open"),A.has("menu-open")||r.enable()}),n(".js-search-form",function(a){a.addEventListener("submit",function(a){a.preventDefault();var b=a.target;"post"===b.method.toLowerCase()&&(b.action+=encodeURI(b.querySelector("input[type=\"search\"]").value)),b.submit()})}),n(".js-search-input",function(a){a.addEventListener("focus",function(a){m(a.target.form).add("active")}),a.addEventListener("blur",function(a){a.target.value.length||m(a.target.form).rem("active")})})),x(".js-share-toggle").addEventListener("click",b),f.addEventListener("keyup",function(a){a.key&&"Escape"===a.key&&(A.rem("share-open"),A.rem("menu-open"),A.rem("search-open"),r.enable())});var C=Object.values(l);n("[data-track-event]",function(a){var b=a.dataset,c=b.trackEvent,d=b.trackKey,e=b.trackValue;c&&(-1===C.indexOf(c)&&C.push(c),d&&e&&a.addEventListener("click",function(){k("track",c,_defineProperty({},d,e))}))}),k("register",C)}var e=window,f=document,g=f.querySelector.bind(f),h=["vertical","dark","transparent","transparentLight"],i=/iPad|iPhone|iPod/.test(navigator.userAgent)&&!e.MSStream,j=new CustomEvent("HFS.recalculateHeight"),k=e.$t||function(){var b=function(){for(var c="getSaves",d=arguments.length,e=Array(d),a=0;a<d;a++)e[a]=arguments[a];return 1<=e.length&&c!==e[0]&&b.e.push(e),c===e[0]?b.e:""};return b.e=[],b.stub="2.0",b}(),l={hmbClick:"mbt_navbar_hamburgerClick",shrClick:"mbt_navbar_shareClick"},m=function(a){return{add:function add(b){return a.classList&&a.classList.add(b),this},rem:function rem(b){return a.classList&&a.classList.remove(b),this},toggle:function toggle(a){var b=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,c=this.has(a);return"boolean"==typeof b?b&&!c?this.add(a):!b&&c&&this.rem(a):this[c?"rem":"add"](a),this},has:function has(b){return!!a.classList&&a.classList.contains(b)}}},n=function(a,b){for(var c=f.querySelectorAll(a),d=0;d<c.length;d+=1)b.call(_this,c[d])},o=function(){function a(b){_classCallCheck(this,a),this.cb=[],this.on=!1,this.type=b}return _createClass(a,[{key:"run",value:function run(){this.cb.forEach(function(a){a()}),this.on=!1}},{key:"listen",value:function listen(){var a=this;this.on||(this.on=!0,e.requestAnimationFrame?e.requestAnimationFrame(function(){a.run.call(a)}):setTimeout(this.run,66))}},{key:"add",value:function add(a){var b=this;return this.cb.length||e.addEventListener(this.type,function(){b.listen.call(b)}),!!a&&this.cb.push(a)}}]),a}(),p=function(a){function b(){return _classCallCheck(this,b),_possibleConstructorReturn(this,_getPrototypeOf(b).call(this,"scroll"))}return _inherits(b,a),_createClass(b,[{key:"run",value:function run(){var a=this;this.cb.forEach(function(b){b({position:a.lastPosition,down:a.scrollDown})}),this.on=!1}},{key:"listen",value:function listen(){this.scrollDown=e.pageYOffset>this.lastPosition,this.lastPosition=e.pageYOffset,_get(_getPrototypeOf(b.prototype),"listen",this).call(this)}}]),b}(o),q=new p,r={selector:null,allow:!0,originalEvent:null,toggle:function toggle(a){r[r.allow?"disable":"enable"](a)},isDescendant:function isDescendant(a,b){for(var c=b.parentNode;null!=c;){if(c===a)return!0;c=c.parentNode}return!1},iosHandler:function iosHandler(a){var b=f.querySelector(r.selector);r.isDescendant(b,a.target)||a.preventDefault(),r.originalEvent&&r.originalEvent.target===a.target||(r.originalEvent=a),a.pageY<r.originalEvent.pageY&&0>=b.scrollHeight-b.scrollTop-b.clientHeight?a.preventDefault():a.pageY>r.originalEvent.pageY&&0>=b.scrollTop&&a.preventDefault()},disable:function disable(a){r.selector=a||null,r.allow=!1,r.selector&&i?(e.addEventListener("wheel",r.iosHandler,{passive:!1}),e.addEventListener("touchmove",r.iosHandler,{passive:!1})):n("html,body",function(a){a.setAttribute("style","overflow:hidden")})},enable:function enable(){r.allow=!0,i?(e.removeEventListener("wheel",r.iosHandler,{passive:!1}),e.removeEventListener("touchmove",r.iosHandler,{passive:!1})):n("html,body",function(a){a.removeAttribute("style")})}},s=e.HFSapi||{};s.selector="#hfs-header",s.updateHeadline=function(a){var b=null;a&&(b=a),g("".concat(s.selector," .js-headline-text")).innerHTML=b,HFSconfig.header.primary=b},s.updateSocial=function(a,b){var c=null;a&&/^https?:\/\/[^ "]+$/.test(a)&&(c=a);var d="";b&&"string"==typeof b&&(d=encodeURIComponent(b.replace(/[\u2018\u2019]/g,"'").replace(/[\u201C\u201D]/g,"\""))),n(".js-hfs-share",function(a){var b=a.dataset,f=b.key,g=b.template,h=g.replace(/URL/,decodeURI(c));h=h.replace(/HEADLINE/,d),h=h.replace(/VIA/,e._HFS&&e._HFS.social?e._HFS.social:""),"sms"===f&&navigator.userAgent&&navigator.userAgent.match(/iPhone|iPad|iPod/i)&&!e.MSStream&&(h=h.replace("?body","&body")),a.setAttribute("href",h)}),HFSconfig.header.url=c,HFSconfig.header.social=decodeURIComponent(d)},s.navSel=null,s.getNav=function(){return s.navSel||(s.navSel=g("".concat(s.selector," > .hfsh"))),s.navSel},s.updateTheme=function(a){var b=m(s.getNav());h.forEach(function(a){b.rem(a)}),-1<h.indexOf(a)&&b.add(a)},s.activate=function(){var a=m(s.getNav());a.add("active")},s.deactivate=function(){var a=m(s.getNav());a.rem("active"),a.rem("share-open")},s.enableGlobalInsert=function(){var a=m(s.getNav());a.add("has-global-insert")},s.disableGlobalInsert=function(){var a=m(s.getNav());a.rem("has-global-insert")};var t,u=0,v=function(){var a=g(s.selector);for(t=a.previousSibling,u=0;null!==t;){if(-1<["DIV"].indexOf(t.nodeName)){var b=e.getComputedStyle(t),c=b.position,d=b.display,f=t.getBoundingClientRect(),h=f.height;"fixed"===c&&"none"!==d&&0<h&&(u+=h)}var i=t;t=i.previousSibling}};e.addEventListener("HFS.recalculateHeight",function(){var a=g("".concat(s.selector," .menu"));if(a){var b=m(s.getNav()),c=g("".concat(s.selector," .global")),d=c&&c.getBoundingClientRect()||{},e=d.height,f=void 0===e?0:e,h=!1;if(u&&b.has("stuck"))h=u,b.has("stash-global")||(h+=f);else if(!b.has("stuck")){var i=g(s.selector),j=i.getBoundingClientRect(),k=j.top,l=void 0===k?0:k;h=l+f}h?a.setAttribute("style","height: calc(100vh - ".concat(h,"px)")):a.removeAttribute("style")}}),f.addEventListener("DOMContentLoaded",d),e.addEventListener("HFS.ready",function(a){"header"===a.detail&&d()})})();